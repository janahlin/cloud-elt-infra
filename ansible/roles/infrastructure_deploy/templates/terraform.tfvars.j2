# Terraform variables for {{ cloud_provider }} deployment in {{ environment | default('development') }} environment
# Generated by Ansible on {{ ansible_date_time.iso8601 }}

# Common variables
cloud_provider = "azure"
environment = "{{ environment | default('development') }}"
use_airflow = {{ 'true' if cloud_provider == 'oci' else 'false' }}
prefix = "cloudelt{{ environment | default('development') | lower | replace('-', '') | replace('_', '') | replace('.', '') | replace('[', '') | replace(']', '') }}"
ssh_public_key = <<-EOT
{{ hostvars['localhost']['ssh_public_key']['content'] | b64decode }}
EOT

{% if cloud_provider == "azure" %}
# Azure specific variables
azure_subscription_id = "{{ azure_subscription_id }}"
azure_client_id = "{{ azure_client_id }}"
azure_client_secret = "{{ azure_client_secret }}"
azure_tenant_id = "{{ azure_tenant_id }}"
azure_location = "{{ azure_location | default('westeurope') }}"

# Azure resource configuration
resource_group_name = "{{ prefix }}rg"
storage_account_name = "{{ prefix }}sa"
key_vault_name = "{{ prefix }}-kv"
databricks_sku = "{{ databricks_sku | default('premium') }}"
{% endif %}

{% if cloud_provider == "oci" %}
# OCI specific variables
oci_tenancy_ocid = "{{ oci_tenancy_ocid }}"
oci_user_ocid = "{{ oci_user_ocid }}"
oci_fingerprint = "{{ oci_fingerprint }}"
oci_private_key_path = "/home/{{ ansible_user }}/.oci/oci_api_key.pem"
oci_region = "{{ oci_region | default('us-ashburn-1') }}"

# OCI resource configuration
compartment_name = "elt-{{ environment | default('development') }}"
vcn_cidr_block = "10.0.0.0/16"
subnet_cidr_block = "10.0.1.0/24"
{% endif %}
